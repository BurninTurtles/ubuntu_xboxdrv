# xboxdrv.conf
# Please, DO NOT EDIT THIS FILE. Edit /etc/defaults/xboxdrv
start on filesystem
pre-start script
    rm -f /dev/input/js*
end script
script
    # Edit /etc/default/xboxdrv to change extra options
    FORCE_FEEDBACK=false
    MIMIC_XPAD=true
    TRIGGER_AS_BUTTON=true
    XBOXDRV_OPTIONS=""
    # Read configuration variable file if it is present
    if [ -f /etc/default/xboxdrv ] ; then
        . /etc/default/xboxdrv
    fi
    # This will store all options from /etc/default/xboxdrv
    XBOXDRV_DAEMON_OPTIONS=""
    # Checking if user has enabled forcefeedback
    if [ "$FORCE_FEEDBACK" = true ] ; then
        XBOXDRV_DAEMON_OPTIONS="$XBOXDRV_DAEMON_OPTIONS --force-feedback"
    fi
    # Checking if user has enabled mimic_xpad
    if [ "$MIMIC_XPAD" = true ] ; then
        XBOXDRV_DAEMON_OPTIONS="$XBOXDRV_DAEMON_OPTIONS --mimic-xpad --mimic-xpad-wireless"
    fi
    # Checking if user is using trigger as buttons instead of zaxis
    if [ "$TRIGGER_AS_BUTTON" = true ] ; then
        XBOXDRV_DAEMON_OPTIONS="$XBOXDRV_DAEMON_OPTIONS --trigger-as-button"
    fi
    # User additional options
    XBOXDRV_DAEMON_OPTIONS="$XBOXDRV_DAEMON_OPTIONS $XBOXDRV_OPTIONS="
    xboxdrv --daemon --silent --dbus disabled $XBOXDRV_DAEMON_OPTIONS --detach-kernel-driver --next-controller --detach-kernel-driver --next-controller --detach-kernel-driver --next-controller --detach-kernel-driver
end script
